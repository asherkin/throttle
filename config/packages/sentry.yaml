when@prod:
    sentry:
        dsn: '%env(SENTRY_DSN)%'

        register_error_listener: false
        register_error_handler: false

        messenger:
            enabled: true
            capture_soft_fails: true

        options:
            environment: '%kernel.environment%'
            traces_sample_rate: 1.0
            integrations:
                - 'Sentry\Integration\IgnoreErrorsIntegration'

    monolog:
        handlers:
            sentry:
                type: sentry
                level: !php/const Monolog\Logger::ERROR
                hub_id: Sentry\State\HubInterface

    services:
        Sentry\Integration\IgnoreErrorsIntegration:
            arguments:
                $options:
                    ignore_exceptions:
                        - 'Symfony\Component\HttpKernel\Exception\NotFoundHttpException'
                        - 'Symfony\Component\Security\Core\Exception\AccessDeniedException'
